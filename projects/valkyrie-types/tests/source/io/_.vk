namespace package.io;

#import("wasi:io/streams", "input-stream")
class InputStream {
    #ffi("wasi:io/streams", "[method]output-stream.blocking-write-and-flush")
    write(self, contents: List<u8>) -> Result<(), StreamError>;
}

#import("wasi:io/streams", "output-stream")
class OutputStream {
    #ffi("wasi:io/streams", "[method]output-stream.blocking-write-and-flush")
    write(self, contents: List<u8>) -> Result<(), StreamError>;
}

#import("wasi:io/error", "error")
class IoError { }

union StreamError {
    LastOperationFailed {
        error: IoError
    },
    Closed
}

#import("wasi:cli/stdin", "get-stdin")
micro standard_input() -> InputStream { }

#import("wasi:cli/stdout", "get-stdout")
micro standard_output() -> OutputStream { }

#import("wasi:cli/stderr", "get-stderr")
micro standard_error() -> OutputStream { }





